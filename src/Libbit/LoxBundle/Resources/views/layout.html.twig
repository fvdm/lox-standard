<html>
<head>
    <link href="{{ asset('bundles/rednoseframework/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet" />
    <link href="{{ asset('cdn/rednose-ui/build/rednose-ui/rednose-ui.css') }}"rel="stylesheet" />

    <link href="{{ asset('bundles/libbitlox/css/lox.css') }}" rel="stylesheet" />
    <link href="{{ asset('bundles/libbitlox/css/icons.css') }}" rel="stylesheet" />

    <script type="text/javascript" src="{{ asset('cdn/yui3/build/yui/yui-min.js') }}"></script>

    {# Include LOX application JS #}
    {% javascripts
        '@LibbitLoxBundle/Resources/public/js/*' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}

    {# Include the module loaders #}
    <script type="text/javascript" src="{{ asset('cdn/rednose-ui/build/rednose-loader/rednose-loader-min.js') }}"></script>

    <script>
        {# Register the loaders as part of the YUI core #}
        YUI.Env.core.push('rednose-loader');

        {# Include the YUI config object with path and URL mappings #}
        {{ rednose_yui_config() }}

        {# Pass environment variables to the YUI core #}
        YUI.Env.routing = {
            logout                  : '{{ path('_rednose_framework_security_logout') }}',
            change_password         : '{{ path('rednose_framework_change_password') }}',
            home                    : '{{ path('libbit_lox_home') }}',
            item                    : '{{ path('libbit_lox_item') }}',
            upload                  : '{{ path('libbit_lox_item_upload') }}',
            metadata                : '{{ path('libbit_lox_get_meta_path') }}',
            tree                    : '{{ path('libbit_lox_get_tree') }}',
            operations_copy         : '{{ path('libbit_lox_post_operations_copy') }}',
            operations_create_folder: '{{ path('libbit_lox_post_operations_create_folder') }}',
            operations_delete       : '{{ path('libbit_lox_post_operations_delete') }}',
            operations_move         : '{{ path('libbit_lox_post_operations_move') }}',
            link_create             : '{{ path('libbit_lox_links_create') }}',
            link_remove             : '{{ path('libbit_lox_links_remove') }}',
            notifications           : '{{ path('libbit_lox_get_notifications') }}',
            notifications_unread    : '{{ path('libbit_lox_get_notifications_unread') }}',
            notifications_mark_read : '{{ path('libbit_lox_post_notifications_mark_read') }}',
            shares_identities       : '{{ path('libbit_lox_identities') }}',
            shares_base             : '{{ path('libbit_lox_shares_get') }}'
        };

        YUI.Env.user = {
            name: '{{ app.user.bestname }}'
        };

        YUI.Env.token = '{{ csrf_provider.generateCsrfToken('web') }}';
    </script>
</head>

<body class="yui3-skin-sam">

{% block application %}

    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="brand brand-navbar lox-brand" href="{{ path('libbit_lox_home')}}"><img src="{{ asset('') }}{{ application_logo }}" /> {{ application_title }}</a>
                <ul class="nav pull-right">
                    <li tabindex="-1" class="nav-item" style="display: none;">
                        <a tabindex="-1" data-id="registerApp" href="{{ path('libbit_lox_register_app_lbox')}}">Register app</a>
                    </li>
                    <li class="dropdown notifications-container">
                        <a href="#" id="notifications-dropdown" class="dropdown-toggle" data-toggle="dropdown">
                            <span>Notifications </span>
                            <span id="badge-notifications" class="badge badge-important"></span>
                            <b class="caret"></b>
                        </a>
                    </li>
                    <li class="dropdown">
                        <a id="user-dropdown" href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-user icon-white"></i> {{ app.user.bestName }} <b class="caret"></b></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container">
        {% block content %}
        {% endblock %}
    </div>

{% endblock %}

</body>
</html>

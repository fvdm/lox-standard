YUI.add("lox-app-share-model",function(e,t){var n=e.Base.create("shareModel",e.Model,[e.Rednose.Model.Spinner],{parse:function(e){return{id:e.id,item:e.item,identities:e.identities}},sync:function(t,n,r){t==="read"&&e.io(YUI.Env.routing.shares_base+n.path,{method:"GET",on:{success:function(t,n){r(null,n.responseText&&e.JSON.parse(n.responseText))},failure:function(t,n){r(n.responseText&&e.JSON.parse(n.responseText))}}}),t==="create"&&e.io(YUI.Env.routing.shares_base+this.get("item").get("path")+"/new",{method:"POST",data:e.JSON.stringify(this.toJSON()),on:{success:function(t,n){r(null,n.responseText&&e.JSON.parse(n.responseText))},failure:function(t,n){r(n.responseText&&e.JSON.parse(n.responseText))}}}),t==="update"&&e.io(YUI.Env.routing.shares_base+"/"+this.get("id")+"/edit",{method:"POST",data:e.JSON.stringify(this.toJSON()),on:{success:function(t,n){r(null,n.responseText&&e.JSON.parse(n.responseText))},failure:function(t,n){r(n.responseText&&e.JSON.parse(n.responseText))}}}),t==="delete"&&e.io(YUI.Env.routing.shares_base+"/"+this.get("id")+"/remove",{method:"POST",on:{success:function(t,n){r(null,n.responseText&&e.JSON.parse(n.responseText))},failure:function(t,n){r(n.responseText&&e.JSON.parse(n.responseText))}}})}},{ATTRS:{item:{value:null,setter:function(t){return t===null?null:t instanceof e.Lox.ItemModel?t:new e.Lox.ItemModel(t)}},identities:{value:new e.ModelList,setter:function(t){return t===null?null:t instanceof e.ModelList?t:new e.ModelList({items:t})}}}});e.namespace("Lox").ShareModel=n},"@VERSION@",{requires:["io","json","lox-app-item-model","model","model-list","rednose-model-spinner"]});
